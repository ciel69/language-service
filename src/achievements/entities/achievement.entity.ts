import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  Index,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToMany,
} from 'typeorm';
import { AchievementCategory } from '../enums/achievement-category.enum';
import { User } from '@/modules/user/entities/user.entity';

/**
 * –°—É—â–Ω–æ—Å—Ç—å "–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ" (Achievement) ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —à–∞–±–ª–æ–Ω –Ω–∞–≥—Ä–∞–¥—ã, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å.
 *
 * –í—Å—è –ª–æ–≥–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç–µ. –û–Ω —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–∏—Å—Ç–µ–º—ã.
 * –£—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ JSONB ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ–ª–∏–∑–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
 *
 * –ü—Ä–∏–º–µ—Ä—ã —É—Å–ª–æ–≤–∏–π:
 *   { "type": "first_word", "value": 1 }              ‚Üí –≤—ã—É—á–∏–ª –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ
 *   { "type": "words_learned", "value": 50 }          ‚Üí –≤—ã—É—á–∏–ª 50+ —Å–ª–æ–≤
 *   { "type": "streak_days", "value": 7 }             ‚Üí –ø–æ–¥—Ä—è–¥ –∑–∞—Ö–æ–¥–∏–ª 7 –¥–Ω–µ–π
 *   { "type": "lessons_in_week", "value": 20 }        ‚Üí –ø—Ä–æ—à—ë–ª 20 —É—Ä–æ–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é (—Å–µ–∑–æ–Ω–Ω–æ–µ)
 *   { "type": "all_n5_kana" }                         ‚Üí –æ—Å–≤–æ–∏–ª –≤—Å–µ 46 –∫–∞–Ω–∞ —É—Ä–æ–≤–Ω—è N5 (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç)
 *
 * –í–∞–∂–Ω–æ: –í—Å–µ —É—Å–ª–æ–≤–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ AchievementService.isConditionMet() ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î.
 */
@Entity('achievement')
@Index(['category']) // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 'learning'")
@Index(['is_hidden']) // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Å–∫—Ä—ã—Ç—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
export class Achievement {
  @PrimaryGeneratedColumn()
  id: number;

  /**
   * –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (UI), –∞–¥–º–∏–Ω–∫–µ, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö.
   *
   * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É.
   * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—Ä–∞—Ç–∫–∏–π, –ø–æ–Ω—è—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç: "–ú–∞—Å—Ç–µ—Ä N5", "–ü–µ—Ä–≤—ã–π —à–∞–≥", "–•—ç–ª–ª–æ—É–∏–Ω—Å–∫–∏–π —É—á–µ–Ω–∏–∫".
   *
   * –ü—Ä–∏–º–µ—Ä—ã:
   *   "–ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ!"
   *   "–û—Å–≤–æ–∏–ª –≤—Å–µ N5 –∫–∞–Ω–∞"
   *   "–£—á–µ–Ω–∏–∫ –¢—å–º—ã (–•—ç–ª–ª–æ—É–∏–Ω)"
   */
  @Column({ type: 'varchar', length: 100, unique: true })
  title: string;

  /**
   * –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ, –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö.
   * –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–ª–∏ –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π —Ç–µ–∫—Å—Ç.
   *
   * –ü—Ä–∏–º–µ—Ä—ã:
   *   "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã—É—á–∏–ª–∏ —Å–≤–æ—ë –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ ‚Äî –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ —Å–≤–æ–±–æ–¥–Ω–æ–º—É –≤–ª–∞–¥–µ–Ω–∏—é —è–ø–æ–Ω—Å–∫–∏–º!"
   *   "–í—ã –æ—Å–≤–æ–∏–ª–∏ –≤—Å–µ 46 –∫–∞–Ω–∞ —É—Ä–æ–≤–Ω—è N5 ‚Äî —Ç–µ–ø–µ—Ä—å –≤—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –º–∞—Å—Ç–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ —è–ø–æ–Ω—Å–∫–æ–≥–æ!"
   *   "–í—ã –ø—Ä–æ—à–ª–∏ 20 —É—Ä–æ–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é –•—ç–ª–ª–æ—É–∏–Ω–∞ ‚Äî –≤—ã —Å—Ç–∞–ª–∏ –ª–µ–≥–µ–Ω–¥–æ–π —Ç—å–º—ã! üéÉ"
   */
  @Column({ type: 'text' })
  description: string;

  /**
   * –ò–º—è –∏–∫–æ–Ω–∫–∏ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Heroicons (–∏–ª–∏ –¥—Ä—É–≥–æ–π UI-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏).
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
   *   - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
   *   - —ç–∫—Ä–∞–Ω –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è
   *   - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   *
   * –§–æ—Ä–º–∞—Ç: —Å—Ç—Ä–æ–∫–∞ –≤ —Å—Ç–∏–ª–µ "icon-name" (–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞). –ù–∞–ø—Ä–∏–º–µ—Ä:
   *   "book-open"   ‚Üí –æ—Ç–∫—Ä—ã—Ç–∞—è –∫–Ω–∏–≥–∞
   *   "star"        ‚Üí –∑–≤–µ–∑–¥–∞
   *   "clock"       ‚Üí —á–∞—Å—ã (–¥–ª—è —Å—Ç—Ä–∞–π–∫–æ–≤)
   *   "jack-o-lantern" ‚Üí —Ç—ã–∫–≤–∞ (–¥–ª—è –•—ç–ª–ª–æ—É–∏–Ω–∞)
   *   "fire"        ‚Üí –æ–≥–æ–Ω—å (–¥–ª—è –≥–æ—Ä—è—á–µ–≥–æ —Å—Ç—Ä–∞–π–∫–∞)
   *
   * –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî "book-open" ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –¥–ª—è —É—á–µ–±–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.
   */
  @Column({
    type: 'varchar',
    length: 50,
    nullable: false,
    default: 'book-open',
  })
  icon: string;

  /**
   * –ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
   *
   * –ó–Ω–∞—á–µ–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è `AchievementCategory`:
   *   - LEARNING      ‚Üí —Å–≤—è–∑–∞–Ω–æ —Å –æ–±—É—á–µ–Ω–∏–µ–º (—Å–ª–æ–≤–∞, –∫–∞–Ω–∞, —É—Ä–æ–∫–∏)
   *   - STREAK        ‚Üí —Å–≤—è–∑–∞–Ω–æ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
   *   - SEASONAL      ‚Üí —Å–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–•—ç–ª–ª–æ—É–∏–Ω, –ù–æ–≤—ã–π –≥–æ–¥ –∏ —Ç.–¥.)
   *   - MILESTONE     ‚Üí –∫—Ä—É–ø–Ω—ã–µ –≤–µ—Ö–∏ (–≤—ã—É—á–∏–ª 1000 —Å–ª–æ–≤)
   *   - SOCIAL        ‚Üí —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–æ—Ü. —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (–ø–æ–¥–µ–ª–∏–ª—Å—è, –ø—Ä–∏–≥–ª–∞—Å–∏–ª –¥—Ä—É–≥–∞)
   *
   * –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
   *   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
   *   - –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–∏—Å–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ‚Äú—Ç–æ–ª—å–∫–æ —Å–µ–∑–æ–Ω–Ω—ã–µ‚Äù)
   *   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ (—Ü–≤–µ—Ç–∞, –∞–Ω–∏–º–∞—Ü–∏–∏) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   */
  @Column({
    type: 'enum',
    enum: AchievementCategory,
    default: AchievementCategory.LEARNING,
  })
  category: AchievementCategory;

  /**
   * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤, –Ω–∞—á–∏—Å–ª—è–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
   *
   * –≠—Ç–∏ –æ—á–∫–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –≤ `user_stat.totalPoints` –∏ –≤–ª–∏—è—é—Ç –Ω–∞:
   *   - —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   *   - –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏—è–º
   *   - –æ–±–º–µ–Ω –Ω–∞ –≤–∞–ª—é—Ç—É (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   *
   * –ú–æ–∂–µ—Ç –±—ã—Ç—å 0 ‚Äî –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Äú–ø–µ—Ä–≤—ã–π –≤—Ö–æ–¥‚Äù).
   *
   * –ü—Ä–∏–º–µ—Ä—ã:
   *   10  ‚Üí –º–∞–ª–µ–Ω—å–∫–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
   *   100 ‚Üí –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ
   *   500 ‚Üí —ç–ø–∏—á–µ—Å–∫–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–æ—Å–≤–æ–∏–ª –≤—Å–µ N5 –∫–∞–Ω–∞")
   */
  @Column({ type: 'integer', default: 0 })
  points: number;

  /**
   * –£—Å–ª–æ–≤–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚Äî —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSONB.
   *
   * –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ.
   * –ï–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `AchievementsService.isConditionMet()` ‚Äî —Ç–∞–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏.
   *
   * –í–æ–∑–º–æ–∂–Ω—ã–µ —Ç–∏–ø—ã —É—Å–ª–æ–≤–∏–π:
   *   - `"first_word"`            ‚Üí wordsLearned >= 1
   *   - `"words_learned"`         ‚Üí wordsLearned >= value
   *   - `"kana_mastered"`         ‚Üí kanaMastered >= value
   *   - `"streak_days"`           ‚Üí streakDays >= value
   *   - `"daily_points"`          ‚Üí dailyPoints >= value
   *   - `"lesson_completed"`      ‚Üí lessonsCompleted >= value
   *   - `"all_n5_words"`          ‚Üí wordsLearned >= COUNT(kana WHERE level = 'N5') ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç
   *   - `"all_n5_kana"`           ‚Üí kanaMastered >= COUNT(kana WHERE jlptLevel = 'N5')
   *   - `"lessons_in_week"`       ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–∫–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç user_daily_activity)
   *
   * üí° –í–∞–∂–Ω–æ: –í—Å–µ —É—Å–ª–æ–≤–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏ –∏ –≤—ã—á–∏—Å–ª–∏–º—ã–º–∏ –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö JOIN‚Äô–æ–≤.
   * –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏–∑ `user_stat`, `user_daily_activity`, `word`, `kana` ‚Äî –Ω–æ –Ω–µ –∏–∑ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü.
   *
   * –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π:
   *   { "type": "first_word" }
   *   { "type": "words_learned", "value": 50 }
   *   { "type": "lessons_in_week", "value": 20 }
   *   { "type": "all_n5_kana" }
   */
  @Column({ type: 'jsonb', nullable: false })
  condition: Record<string, any>;

  /**
   * –ï—Å–ª–∏ true ‚Äî –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ –º–æ–º–µ–Ω—Ç–∞ –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è.
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ ‚Äú—Ç–∞–π–Ω–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è‚Äù:
   *   - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ ‚Äú–ú–∞—Å—Ç–µ—Ä N5‚Äù
   *   - –æ–Ω —É–∑–Ω–∞—ë—Ç –æ –Ω—ë–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç —É—Å–ª–æ–≤–∏–µ
   *   - –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –æ–Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è
   *
   * –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:
   *   - –ø–æ–≤—ã—à–µ–Ω–∏—è –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–∞
   *   - —Å–æ–∑–¥–∞–Ω–∏—è ‚Äú–æ—Ç–∫—Ä—ã—Ç–∏–π‚Äù
   *   - —Å–æ–∫—Ä—ã—Ç–∏—è —Å–ª–æ–∂–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –¥–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞
   *
   * –ü—Ä–∏–º–µ—Ä: ‚Äú–¢—ã –Ω–µ –∑–Ω–∞–µ—à—å, —á—Ç–æ —É–º–µ–µ—à—å –≤—Å—ë? –ê –≤–æ—Ç –∏ –¥–∞!‚Äù
   */
  @Column({ type: 'boolean', default: false })
  is_hidden: boolean;

  /**
   * –ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º —Å–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–æ–ª—É—á–∏–ª–∏ —ç—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ.
   *
   * –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ ‚Äî –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –≤—Å–µ—Ö –æ–±–ª–∞–¥–∞—Ç–µ–ª–µ–π.
   * –°–≤—è–∑—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `user_achievement`.
   *
   * ‚ö†Ô∏è –í–∞–∂–Ω–æ: –≠—Ç–∞ —Å–≤—è–∑—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ ‚Äî –æ–Ω–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è:
   *   - –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (‚Äú—Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –ø–æ–ª—É—á–∏–ª–∏ ‚Äò–ú–∞—Å—Ç–µ—Ä N5‚Äô?‚Äù)
   *   - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (‚Äú–ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö, –∫—Ç–æ –ø–æ–ª—É—á–∏–ª —ç—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ‚Äù)
   *
   * –†–µ–∞–ª—å–Ω–æ–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ª–∏—á–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `user_achievement`.
   */
  @ManyToMany(() => User, (user) => user.achievements)
  users: User[];

  /**
   * –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ —Å–∏—Å—Ç–µ–º–µ.
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
   *   - –∞—É–¥–∏—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   *   - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è ‚Äú–≤–æ–∑—Ä–∞—Å—Ç–∞‚Äù –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
   *   - –æ—Ç–ª–∞–¥–∫–∏ (–∫–æ–≥–¥–∞ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ?)
   *
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è TypeORM –ø—Ä–∏ INSERT.
   */
  @CreateDateColumn({ type: 'timestamp', name: 'created_at' })
  createdAt: Date;

  /**
   * –ü–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏.
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–µ–Ω—è–µ—Ç:
   *   - –Ω–∞–∑–≤–∞–Ω–∏–µ
   *   - –æ–ø–∏—Å–∞–Ω–∏–µ
   *   - –∏–∫–æ–Ω–∫—É
   *   - —É—Å–ª–æ–≤–∏—è
   *
   * –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –º–µ–Ω—è–ª–æ—Å—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ ‚Äî –≤–∞–∂–Ω–æ –¥–ª—è:
   *   - —Ä–∞—Å—Å—ã–ª–æ–∫
   *   - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   *   - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
   *
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è TypeORM –ø—Ä–∏ UPDATE.
   */
  @UpdateDateColumn({ type: 'timestamp', name: 'updated_at' })
  updatedAt: Date;

  /**
   * –§–ª–∞–≥, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, —á—Ç–æ —ç—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ ‚Äî —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è (—Å–µ–∑–æ–Ω–Ω–æ–µ).
   *
   * –ü—Ä–∏–º–µ—Ä—ã:
   *   true  ‚Üí "–•—ç–ª–ª–æ—É–∏–Ω: –£—á–µ–Ω–∏–∫ –¢—å–º—ã"
   *   false ‚Üí "–ü–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ!" (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ)
   *
   * –ï—Å–ª–∏ `is_seasonal === true`, —Ç–æ:
   *   - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É `start_date` –∏ `end_date`
   *   - –µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ ‚Äú–°–æ–±—ã—Ç–∏—è –Ω–µ–¥–µ–ª–∏‚Äù
   *   - –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–∏–¥–∏–º—ã–º –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
   *
   * ‚ö†Ô∏è –í–∞–∂–Ω–æ: –î–∞–∂–µ –µ—Å–ª–∏ `is_seasonal === true`, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –ë–î ‚Äî –æ–Ω–æ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏!
   */
  @Column({ type: 'boolean', default: false })
  is_seasonal: boolean;

  /**
   * –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–∑–æ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ.
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
   *   - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –•—ç–ª–ª–æ—É–∏–Ω 2025)
   *   - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —Å–æ–±—ã—Ç–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: ‚Äú–ü—Ä–æ–π–¥–µ–Ω–æ 17/20 —É—Ä–æ–∫–æ–≤ –•—ç–ª–ª–æ—É–∏–Ω–∞‚Äù)
   *   - –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ WebSocket: `{ type: 'seasonal_progress_update', season_id: 'halloween_2025' }`
   *
   * –§–æ—Ä–º–∞—Ç: snake_case, —Å –≥–æ–¥–æ–º –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏:
   *   - `halloween_2025`
   *   - `newyear_2026`
   *   - `cherry_blossom_spring_2025`
   *
   * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω, –µ—Å–ª–∏ `is_seasonal === true`.
   */
  @Column({ type: 'varchar', length: 50, nullable: true })
  season_id: string;

  /**
   * –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ–∑–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
   *
   * –¢–æ–ª—å–∫–æ –¥–ª—è `is_seasonal === true`.
   *
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
   *   - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º—É
   *   - –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `checkAndAwardAchievements()`
   *   - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –≤ UI
   *
   * –ü—Ä–∏–º–µ—Ä: `2025-10-20T00:00:00Z`
   *
   * ‚ö†Ô∏è –ï—Å–ª–∏ `is_seasonal === false`, –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å null.
   */
  @Column({ type: 'timestamp', nullable: true })
  start_date: Date;

  /**
   * –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è —Å–µ–∑–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
   *
   * –¢–æ–ª—å–∫–æ –¥–ª—è `is_seasonal === true`.
   *
   * –ü–æ—Å–ª–µ —ç—Ç–æ–π –¥–∞—Ç—ã:
   *   - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω–æ
   *   - –æ–Ω–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö
   *   - –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   *
   * –ü—Ä–∏–º–µ—Ä: `2025-10-27T23:59:59Z`
   *
   * ‚ö†Ô∏è –ï—Å–ª–∏ `is_seasonal === false`, –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å null.
   */
  @Column({ type: 'timestamp', nullable: true })
  end_date: Date;
}
